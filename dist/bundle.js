!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=3)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=(o.prototype.render=function(t){var e=this,n=e.x,r=e.y,o=e.r,a=e.scaleX,i=e.scaleY,u=e.color,s=e.strokeStyle,l=e.alpha;t.save(),t.translate(n,r),t.scale(a,i),t.strokeStyle=s,t.fillStyle=u,t.globalAlpha=l,t.beginPath(),t.arc(0,0,o,0,2*Math.PI),t.fill(),t.stroke(),t.restore()},o.prototype.isPoint=function(t){var e=t.x,n=t.y;return this.r>=Math.sqrt(Math.pow(e-this.x,2)+Math.pow(n-this.y,2))},o);function o(t){this.x=0,this.y=0,this.r=20,this.m=0,this.vx=0,this.vy=0,this.scaleX=1,this.scaleY=1,this.strokeStyle="rgba(0, 0, 0, 0)",this.color="rgb(0, 0, 0)",this.alpha=1,Object.assign(this,t)}e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=(o.prototype.render=function(t){var e=this,n=e.x,r=e.y,o=e.x1,a=e.y1,i=e.x2,u=e.y2,s=e.rotation,l=e.lineWidth,v=e.color,d=e.alpha;t.save(),t.translate(n,r),t.rotate(s),t.lineWidth=l,t.strokeStyle=v,t.globalAlpha=d,t.beginPath(),t.moveTo(o,a),t.lineTo(i,u),t.stroke(),t.restore()},o);function o(t){this.x=0,this.y=0,this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.rotation=0,this.lineWidth=1,this.color="rgb(0, 0, 0)",this.alpha=1,Object.assign(this,t)}e.default=r},function(t,e,n){"use strict";function r(t,e){var n=Math.max.apply(Math,t),r=Math.min.apply(Math,t),o=Math.random()*(n-r)+r;return e?Math.round(o):o}Object.defineProperty(e,"__esModule",{value:!0}),e.randomNum=r,e.randomColor=function(){return"rgb("+r([0,255],!0)+", "+r([0,255],!0)+", "+r([0,255],!0)+")"},e.getDist=function(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},e.getPosition=function(t){var e={x:0,y:0};return t.addEventListener("mousemove",function(t){var n=t.pageX,r=t.pageY,o=t.target.getBoundingClientRect(),a=o.left,i=o.top;e.x=n-a,e.y=r-i}),e},e.angle2Radian=function(t){return t*Math.PI/180},e.radian2Angle=function(t){return 180*t/Math.PI}},function(t,e,n){"use strict";function r(t){var e=t.target.selectedIndex;l(u);var n=s(e);i[e].stopFrameFn&&i[e].stopFrameFn(!1),i[e].drawFn(n),u=e,i.map(function(t){t.id!==e&&i[t.id].stopFrameFn&&i[t.id].stopFrameFn(!0)})}Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),a=n(5),i=[{id:0,text:"模拟小球掉落",drawFn:o.SimulateBallDrop,stopFrameFn:o.StopFrame},{id:1,text:"粒子引力",drawFn:a.Gravitation,stopFrameFn:a.StopFrame,canvasBackground:"#000"}],u=0,s=function(t){var e=document.createElement("canvas");e.id="canvas"+t,i[t].canvasBackground&&(e.style="background-color: "+i[t].canvasBackground+";");var n=document.getElementById("select");return document.body.insertBefore(e,n),e},l=function(t){var e=document.getElementById("canvas"+t);document.body.removeChild(e)};!function(){var t=document.createElement("select");t.id="select",t.onchange=r;for(var e=0;e<i.length;e++)t.options[e]=new Option(i[e].text,"");document.body.appendChild(t);var n=s(u);i[u].drawFn(n)}()},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(0)),a=r(n(1)),i=n(2),u=!1;function s(t,e,n){var r=e.x-t.x,o=e.y-t.y,a=Math.sqrt(Math.pow(r,2)+Math.pow(o,2)),i=t.r+e.r;if(a<i){var u=t.x+r/a*i,s=t.y+o/a*i,l=(u-e.x)*n,v=(s-e.y)*n;t.vx-=l,t.vy-=v,e.vx+=l,e.vy+=v}}e.StopFrame=function(t){u=t};var l=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;e.SimulateBallDrop=function(t){var e=t.width=800,n=t.height=600,r=t.getContext("2d"),v=[],d=[];d.push(new a.default({x:100,y:400,x2:290,rotation:i.angle2Radian(20),lineWidth:5})),d.push(new a.default({x:700,y:400,x2:290,rotation:i.angle2Radian(160),lineWidth:5}));for(var c=0;c<20;c++)v.push(new o.default({x:i.randomNum([0,e],!1),y:i.randomNum([0,n],!1),r:i.randomNum([3,20],!1),color:i.randomColor()}));var f=function(){u||(l(f),r.clearRect(0,0,e,n),function(t,e,n,r){for(var o=0,a=t.length;o<a;o++){for(var i=t[o],u=0,l=e.length;u<l;u++)d=i,c=e[u],-.5,g=p=m=h=void 0,f=Math.sin(c.rotation),y=Math.cos(c.rotation),x=(h=d.x-c.x)*y+(m=d.y-c.y)*f,p=m*y-h*f,w=d.vx*y+d.vy*f,g=d.vy*y-d.vx*f,x+d.r>c.x1&&x-d.r<c.x2&&(0<p+d.r&&p<g&&(p=-d.r,g*=-.5),p-d.r<0&&g<p&&(p=d.r,g*=-.5)),h=x*y-p*f,m=p*y+x*f,d.vx=w*y-g*f,d.vy=g*y+w*f,d.x=c.x+h,d.y=c.y+m;for(var v=o+1;v<a;v++)s(i,t[v],.25)}var d,c,f,y,h,m,x,p,w,g}(v,d),function(t,e,n,r,o,a,i){for(var u=0,s=t.length;u<s;u++)t[u].vy+=.3,0<t[u].vy&&0<t[u].vy-n?t[u].vy-=n:t[u].vy<0&&t[u].vy+n<0?t[u].vy+=n:t[u].vy=0,0<t[u].vx&&0<t[u].vx-e?t[u].vx-=e:t[u].vx<0&&t[u].vx+e<0?t[u].vx+=e:t[u].vx=0,t[u].y+=t[u].vy,t[u].y+t[u].r>=i&&(t[u].y=i-t[u].r,t[u].vy*=-1),t[u].x+=t[u].vx,t[u].x-t[u].r<=0?(t[u].x=t[u].r,t[u].vx*=-.5):t[u].x+t[u].r>=a&&(t[u].x=a-t[u].r,t[u].vx*=-.5)}(v,.01,.05,0,0,e,n),function(t,e){for(var n=0,r=e.length;n<r;n++)e[n].render(t)}(r,v),function(t,e){for(var n=0,r=e.length;n<r;n++)e[n].render(t)}(r,d))};f()}},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(0)),a=r(n(1)),i=n(2),u=!1;function s(t,e,n,r,o,i){var u=n.x-e.x,s=n.y-e.y,l=Math.sqrt(Math.pow(u,2)+Math.pow(s,2)),v=i<o?o/10:i/5;if(l<v){!function(t,e,n,r,o){new a.default({x1:e.x,y1:e.y,x2:n.x,y2:n.y,color:"#fff",lineWidth:2*Math.max(0,1-r/o),alpha:Math.max(0,1-r/o)}).render(t)}(t,e,n,l,v);var d=u*r,c=s*r;e.vx+=d/e.m,e.vy+=c/e.m,n.vx-=d/n.m,n.vy-=c/n.m}}function l(t,e){var n=e.x-t.x,r=e.y-t.y;if(Math.sqrt(Math.pow(n,2)+Math.pow(r,2))<t.r+e.r){var o=Math.atan2(r,n),a=Math.sin(o),i=Math.cos(o),u=0,s=n*i+r*a,l=r*i-n*a,v=t.vx*i+t.vy*a,d=t.vy*i-t.vx*a,c=e.vx*i+e.vy*a,f=e.vy*i-e.vx*a,y=((t.m-e.m)*v+2*e.m*c)/(t.m+e.m),h=((e.m-t.m)*c+2*t.m*v)/(t.m+e.m),m=t.r+e.r-Math.abs(s-u);u+=y<0?-m/2:m/2,s+=h<0?-m/2:m/2,e.x=t.x+(s*i-l*a),e.y=t.y+(l*i+s*a),t.x=t.x+(u*i-0*a),t.y=t.y+(0*i+u*a),t.vx=y*i-d*a,t.vy=d*i+y*a,e.vx=h*i-f*a,e.vy=f*i+h*a}}e.StopFrame=function(t){u=t};var v=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;e.Gravitation=function(t){var e=t.getContext("2d"),n=0,r=0,a=[];window.onresize=function(){n=t.width=window.innerWidth,r=t.height=window.innerHeight,a=function(t,e,n){for(var r=[],a=0;a<t;a++){var u=i.randomNum([5,15],!1);r.push(new o.default({x:i.randomNum([0,e],!1),y:i.randomNum([0,n],!1),r:u,m:u,vx:i.randomNum([-2,2],!1),vy:i.randomNum([-2,2],!1),color:i.randomColor()}))}return r}(n*r/5e3,n,r)},window.onresize();var d=function(){u||(v(d),e.clearRect(0,0,n,r),function(t,e,n,r,o){for(var a=0,i=e.length;a<i;a++){var u=e[a];u.x+=u.vx,u.y+=u.vy;for(var v=a+1;v<i;v++){var d=e[v];s(t,u,d,1e-4,r,o),l(u,d)}u.x-u.r>r?u.x=-u.r:u.x+u.r<0&&(u.x=r+u.r),u.y-u.r>o?u.y=-u.r:u.y+u.r<0&&(u.y=o+u.r)}}(e,a,0,n,r),function(t,e){for(var n=0,r=e.length;n<r;n++)e[n].render(t)}(e,a))};d()}}]);